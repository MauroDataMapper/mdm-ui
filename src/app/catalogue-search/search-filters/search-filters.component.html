<!--
Copyright 2020-2024 University of Oxford and NHS England

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

SPDX-License-Identifier: Apache-2.0
-->
<div class="mdm-search-filters">
  <div class="mdm-search-filters__header">
    <h3>Filters</h3>
  </div>
  <button
    mat-stroked-button
    color="primary"
    type="button"
    class="w-100"
    (click)="resetAll()"
  >
    Reset All
  </button>
  <div class="mdm-search-filters__section">
    <mat-divider></mat-divider>
    <ul>
      <li>
        <mat-checkbox
          color="primary"
          [checked]="labelOnlyFilter.checked"
          (change)="onLabelOnlyChange($event)"
        >
          Label Only
        </mat-checkbox>
      </li>
      <li>
        <mat-checkbox
          color="primary"
          [checked]="exactMatchFilter.checked"
          (change)="onExactMatchChange($event)"
        >
          Exact Match
        </mat-checkbox>
      </li>
      <li>
        <mat-checkbox
          color="primary"
          [checked]="includeSupersededFilter.checked"
          (change)="onIncludeSupersededChange($event)"
        >
          Show Superseded
        </mat-checkbox>
      </li>
    </ul>
  </div>
  <div class="mdm-search-filters__section">
    <mat-divider></mat-divider>
    <div class="input-group mb-3">
      <button
        type="button"
        class="form-control"
        aria-label="Choose a catalogue item"
        (click)="openCatalogueItemSelectModal()"
      >
        {{ context ? context.label : 'Choose a catalogue item' }}
      </button>
      <div class="input-group-append">
        <span class="input-group-text"
          ><mat-icon (click)="onContextClear()">clear</mat-icon></span
        >
      </div>
    </div>
  </div>
  <div class="mdm-search-filters__section">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Domain Type</mat-label>
      <mat-select
        (selectionChange)="onDomainTypeChange($event)"
        multiple
        placeholder="Domain Types"
        [(ngModel)]="domainTypes"
      >
        <mat-option
          *ngFor="let domainType of domainTypesFilter"
          [value]="domainType.domainType"
        >
          {{ domainType.name }}</mat-option
        >
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Classifiers</mat-label>
      <mat-select
        (selectionChange)="onClassifiersChange($event)"
        multiple
        placeholder="Classifiers"
        [(ngModel)]="classifiers"
      >
        <mat-option
          *ngFor="let classifier of classifiersFilter"
          [value]="classifier.label"
        >
          {{ classifier.label }}</mat-option
        >
      </mat-select>
    </mat-form-field>
  </div>
  <div class="mdm-search-filters__section">
    <mat-divider></mat-divider>
    <div>
      <mat-form-field
        appearance="outline"
        class="full-width form-field-align-center"
      >
        <mat-label>Updated After</mat-label>
        <input
          matInput
          [matDatepicker]="lastUpdatedAfter"
          (dateChange)="onDateChange('lastUpdatedAfter', $event)"
          [value]="lastUpdatedAfterFilter.value"
        />
        <mat-icon
          matDatepickerToggleIcon
          (click)="onDateClear('lastUpdatedAfter')"
          >clear</mat-icon
        >
        <mat-datepicker-toggle matSuffix [for]="lastUpdatedAfter">
        </mat-datepicker-toggle>
        <mat-datepicker #lastUpdatedAfter></mat-datepicker>
      </mat-form-field>
      <mat-form-field
        appearance="outline"
        class="full-width form-field-align-center"
      >
        <mat-label>Updated Before</mat-label>
        <input
          matInput
          [matDatepicker]="lastUpdatedBefore"
          (dateChange)="onDateChange('lastUpdatedBefore', $event)"
          [value]="lastUpdatedBeforeFilter.value"
        />
        <mat-icon
          matDatepickerToggleIcon
          (click)="onDateClear('lastUpdatedBefore')"
          >clear</mat-icon
        >
        <mat-datepicker-toggle matSuffix [for]="lastUpdatedBefore">
        </mat-datepicker-toggle>
        <mat-datepicker #lastUpdatedBefore></mat-datepicker>
      </mat-form-field>
      <mat-form-field
        appearance="outline"
        class="full-width form-field-align-center"
      >
        <mat-label>Created After</mat-label>
        <input
          matInput
          [matDatepicker]="createdAfter"
          (dateChange)="onDateChange('createdAfter', $event)"
          [value]="createdAfterFilter.value"
        />
        <mat-icon matDatepickerToggleIcon (click)="onDateClear('createdAfter')"
          >clear</mat-icon
        >
        <mat-datepicker-toggle matSuffix [for]="createdAfter">
        </mat-datepicker-toggle>
        <mat-datepicker #createdAfter></mat-datepicker>
      </mat-form-field>
      <mat-form-field
        appearance="outline"
        class="full-width form-field-align-center"
      >
        <mat-label>Created Before</mat-label>
        <input
          matInput
          [matDatepicker]="createdBefore"
          (dateChange)="onDateChange('createdBefore', $event)"
          [value]="createdBeforeFilter.value"
        />
        <mat-icon matDatepickerToggleIcon (click)="onDateClear('createdBefore')"
          >clear</mat-icon
        >
        <mat-datepicker-toggle matSuffix [for]="createdBefore">
        </mat-datepicker-toggle>
        <mat-datepicker #createdBefore></mat-datepicker>
      </mat-form-field>
    </div>
  </div>
</div>
